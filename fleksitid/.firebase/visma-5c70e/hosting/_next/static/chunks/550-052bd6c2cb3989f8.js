(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{43226:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(20791),a=r(13428),i=r(2265),s=r(57042),l=r(43381),o=r(40182),d=r(35843),u=r(87927),c=r(28702),m=r(62423),p=r(20800);function getTypographyUtilityClass(e){return(0,p.ZP)("MuiTypography",e)}(0,m.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var x=r(57437);let f=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses=e=>{let{align:t,gutterBottom:r,noWrap:n,paragraph:a,variant:i,classes:s}=e,l={root:["root",i,"inherit"!==e.align&&`align${(0,c.Z)(t)}`,r&&"gutterBottom",n&&"noWrap",a&&"paragraph"]};return(0,o.Z)(l,getTypographyUtilityClass,s)},h=(0,d.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t[`align${(0,c.Z)(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>(0,a.Z)({margin:0},"inherit"===t.variant&&{font:"inherit"},"inherit"!==t.variant&&e.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),v={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},j={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=e=>j[e]||e,B=i.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiTypography"}),i=transformDeprecatedColors(r.color),o=(0,l.Z)((0,a.Z)({},r,{color:i})),{align:d="inherit",className:c,component:m,gutterBottom:p=!1,noWrap:j=!1,paragraph:B=!1,variant:g="body1",variantMapping:k=v}=o,y=(0,n.Z)(o,f),S=(0,a.Z)({},o,{align:d,color:i,className:c,component:m,gutterBottom:p,noWrap:j,paragraph:B,variant:g,variantMapping:k}),b=m||(B?"p":k[g]||v[g])||"span",Z=useUtilityClasses(S);return(0,x.jsx)(h,(0,a.Z)({as:b,ref:t,ownerState:S,className:(0,s.Z)(Z.root,c)},y))});var g=B},33743:function(e,t,r){"use strict";r.d(t,{Z:function(){return FinnAdminBrukerSkjema}});var n=r(57437),a=r(2265),i=r(17222),s=r(25577),l=r(70148),o=r(24086),d=r(24033),u=r(49050),c=r(98075),m=r(49804);function FinnBrukerErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(m.Z,{severity:"error",children:"Finner ikke bruker"})}function ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(m.Z,{severity:"error",children:"Fyll inn ansatt nummer"})}function FinnAdminBrukerButton(e){let{onFind:t,isFormValid:r,onFormReset:i,onGoBack:l}=e,[o,d]=(0,a.useState)(!1);return(0,n.jsxs)(s.Z,{children:[(0,n.jsxs)(c.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(u.Z,{variant:"contained",onClick:()=>{r?(t(),d(!1)):(console.log("valider ikke "+r),d(!0),setTimeout(()=>{d(!1)},3e3))},children:"Finn bruker"}),(0,n.jsx)(u.Z,{variant:"outlined",onClick:()=>{d(!1),i()},children:"Reset"})]}),(0,n.jsx)(c.Z,{sx:{pt:2},children:(0,n.jsx)(u.Z,{variant:"outlined",onClick:()=>{l()},children:"Tilbake"})}),(0,n.jsx)(ButtonErrorAlert,{vis:o})]})}var p=r(59189),x=r(16895);let useResetFinnAdminBrukerForm=e=>{a.useEffect(()=>{document.getElementById("Brukernavn").value=e.Brukernavn},[e])};function FinnAdminBrukerTextField(e){let{formData:t,onChange:r}=e,a=(0,x.q)(r);return useResetFinnAdminBrukerForm(t),(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"90%"},mx:2},noValidate:!0,autoComplete:"off",children:[{id:"Brukernavn",label:"Brukernavn",required:!0,variant:"filled"}].map(e=>(0,n.jsx)(p.Z,{required:e.required,id:e.id,label:e.label,variant:e.variant,onChange:a,value:t[e.id]},e.id))})}let f={fontSize:"16px",fontWeight:"bold",color:"black"},h=[{id:"Brukernavn",label:"Brukernavn",variant:"filled"}];function SlettAdminBrukerTextField(e){let{formData:t}=e;return(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:h.map(e=>(0,n.jsx)(p.Z,{disabled:!0,id:e.id,label:e.label,variant:e.variant,type:e.type,value:t[e.id],InputProps:{style:f}},e.id))})}function SlettAdminBrukerButton(e){let{onDelete:t,handleFormReturn:r}=e;return(0,n.jsx)(s.Z,{children:(0,n.jsxs)(c.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(u.Z,{variant:"outlined",onClick:()=>{r()},children:"Tilbake"}),(0,n.jsx)(u.Z,{variant:"contained",onClick:()=>{t()},children:"Slett bruker"})]})})}function SlettetAdminBrukerSuccsessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(m.Z,{severity:"success",children:"Slettet admin bruker"})}function SlettAdminBrukerSkjema(e){let{userData:t,onGoBack:r}=e,[d,u]=a.useState(t),[c,m]=a.useState(!1),handleSlettBruker=async()=>{console.log("Sletter data fra database:",d),await (0,o.oe)((0,o.JU)(l.db,l.S2,d.Brukernavn)),m(!0),setTimeout(()=>{r()},3e3)};return(0,n.jsx)(s.Z,{sx:{width:.5},alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(SlettAdminBrukerTextField,{formData:d}),(0,n.jsx)(SlettAdminBrukerButton,{onDelete:handleSlettBruker,handleFormReturn:()=>{r()}}),(0,n.jsx)(SlettetAdminBrukerSuccsessAlert,{vis:c})]})})})})}var v=r(2890);let useFormOppdaterAdminBrukerDataEffect=e=>{a.useEffect(()=>{document.getElementById("Brukernavn").value=e.Brukernavn,document.getElementById("Epost").value=e.Epost},[e])};var j=r(90026);let B=[{id:"Brukernavn",label:"Brukernavn",required:!0,variant:"filled"},{id:"Epost",label:"Epost",required:!0,variant:"filled"}];function OppdaterAdminBrukerForm(e){let{formData:t,onChange:r}=e,a=(0,x.q)(r);(0,v.J)(t),useFormOppdaterAdminBrukerDataEffect(t);let i=(0,j.C)(r);return(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:B.map(e=>(0,n.jsx)(p.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:t=>{a(t),("Passord"===e.id||"GjentaPassord"===e.id)&&i(t)},value:t[e.id]},e.id))})}function OppdatertBrukerSuccsessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(m.Z,{severity:"success",children:"Oppdatert bruker"})}function OppdatertBrukerErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(m.Z,{severity:"error",children:"Ansatt nummer finnes fra f\xf8r"})}function OppdatertBrukerInfoAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(m.Z,{severity:"info",children:"Ingen ting er endret"})}function Alerts_ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(m.Z,{severity:"error",children:"Fyll inn alle feltene og passord m\xe5 matche"})}function OppdaterAdminBrukerButton(e){let{onSave:t,isFormValid:r,onFormReturn:i,onByttPassord:s}=e,[l,o]=a.useState(!1);return(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z,{style:{marginBottom:"20px"},children:(0,n.jsx)(u.Z,{variant:"outlined",onClick:()=>{s(),o(!1)},children:"ByttPassord"})}),(0,n.jsxs)(c.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(u.Z,{variant:"outlined",onClick:()=>{i(),o(!1)},children:"Tilbake"}),(0,n.jsx)(u.Z,{variant:"contained",onClick:()=>{r?(t(),o(!1)):(o(!0),setTimeout(()=>{o(!1)},3e3))},children:"Oppdater"})]}),(0,n.jsx)(Alerts_ButtonErrorAlert,{vis:l})]})}var g=r(77975);let k=[{id:"Passord",label:"Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"},{id:"GjentaPassord",label:"Gjenta Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"}];function ByttPassordForm(e){let{formData:t,onChange:r}=e,a=(0,v.J)(t),i=(0,j.C)(r);return(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:k.map(e=>(0,n.jsx)(p.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:e=>{i(e)},value:t[e.id],error:("Passord"===e.id||"GjentaPassord"===e.id)&&a,helperText:("Passord"===e.id||"GjentaPassord"===e.id)&&a?"Passord m\xe5 ha 7 tegn":""},e.id))})}function ByttAdminPassordButton(e){let{onSave:t,isFormValid:r,onFormReturn:i}=e,[s,l]=a.useState(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(c.Z,{direction:"row",spacing:2,justifyContent:"flex-center",children:[(0,n.jsx)(u.Z,{variant:"outlined",onClick:()=>{i(),l(!1)},children:"Tilbake"}),(0,n.jsx)(u.Z,{variant:"contained",onClick:()=>{r?(t(),l(!1)):(l(!0),setTimeout(()=>{l(!1)},3e3))},children:"Bytt Passord"})]}),(0,n.jsx)(g.CZ,{vis:s})]})}var y=r(43226);function ByttAdminPassordTittel(){return(0,n.jsx)(s.Z,{sx:{width:"100%",maxWidth:1e3,textAlign:"center",margin:"auto"},children:(0,n.jsx)(y.Z,{variant:"h1",sx:{fontSize:"2rem"},gutterBottom:!0,children:"Bytt Passord"})})}var S=r(39130),b=r(3467);function ByttPassordSkjema(e){let{userData:t,onGoBack:r}=e,[d,u]=a.useState({...t,Passord:"",GjentaPassord:""}),[c,m]=a.useState(!1),[p,x]=a.useState(!1),handleSave=async()=>{console.log("Endrer passord i database");try{let e=await (0,S.Z)(d.Passord);await (0,o.pl)((0,o.JU)(l.db,l.S2,d.Brukernavn),{Passord:e,SistEndret:(0,o.Bt)()},{merge:!0}),m(!0),setTimeout(()=>{r()},3e3)}catch(e){x(!0),m(!1),setTimeout(()=>{r()},3e3)}},f=d.Passord===t.Passord&&d.GjentaPassord===t.GjentaPassord||d.Passord.length===b.V&&d.Passord===d.GjentaPassord;return(0,n.jsx)(s.Z,{sx:{width:.5},alignItems:"center",justifyContent:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(ByttAdminPassordTittel,{}),(0,n.jsx)(ByttPassordForm,{formData:d,onChange:u}),(0,n.jsx)(ByttAdminPassordButton,{onSave:handleSave,isFormValid:f,onFormReturn:()=>{console.log("Returnerer til oppdater bruker skjema"),r()}}),(0,n.jsx)(g.r_,{vis:c}),(0,n.jsx)(g.Sj,{vis:p})]})})})})}function OppdaterAdminBrukerSkjema(e){let{userData:t,onGoBack:r}=e,[d,u]=a.useState(t);a.useEffect(()=>{u(t)},[t]),a.useEffect(()=>{let e=(0,o.JU)(l.db,l.S2,t.Brukernavn),r=(0,o.cf)(e,e=>{if(e.exists()){let t=e.data().Passord;u(e=>({...e,Passord:t}))}});return()=>r()},[t.Brukernavn]);let[c,m]=a.useState(!1),[p,x]=a.useState(!1),[f,h]=a.useState(!1),[v,j]=a.useState(!1),handleSave=async()=>{let e=Object.keys(t).some(e=>t[e]!==d[e]);if(e){if(d.Brukernavn!==t.Brukernavn){let e=(0,o.JU)(l.db,l.S2,d.Brukernavn),n=await (0,o.QT)(e);if(n.exists())x(!0),m(!1),h(!1);else{let n={...d,SistEndret:(0,o.Bt)()};delete n.GjentaPassord,await (0,o.pl)(e,n);let a=(0,o.JU)(l.db,l.S2,t.Brukernavn),i=await (0,o.QT)(a);i.exists()&&(await (0,o.oe)(a),console.log("Slettet gammelt dokument med ansattNr: ",t.Brukernavn)),m(!0),x(!1),h(!1),setTimeout(()=>{r()},3e3)}}else{let e=(0,o.JU)(l.db,l.S2,t.Brukernavn),n={...d,SistEndret:(0,o.Bt)()};delete n.GjentaPassord,await (0,o.pl)(e,n),m(!0),x(!1),h(!1),setTimeout(()=>{r()},3e3)}}else h(!0),x(!1),m(!1),console.log("Ingen ting endret")},B=""!==d.Brukernavn&&""!==d.Epost;return(0,n.jsx)(s.Z,{sx:{width:"70%",margin:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:v?(0,n.jsx)(ByttPassordSkjema,{userData:t,onGoBack:()=>{j(!1)}}):(0,n.jsx)(s.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(OppdaterAdminBrukerForm,{formData:d,onChange:u}),(0,n.jsx)(OppdaterAdminBrukerButton,{onSave:handleSave,isFormValid:B,onFormReturn:()=>{r()},onByttPassord:()=>{j(!0),h(!1),x(!1),m(!1)}}),(0,n.jsx)(OppdatertBrukerSuccsessAlert,{vis:c}),(0,n.jsx)(OppdatertBrukerErrorAlert,{vis:p}),(0,n.jsx)(OppdatertBrukerInfoAlert,{vis:f})]})})})})}function FinnAdminBrukerSkjema(e){let{onGoBack:t}=e,[r,u]=a.useState({Brukernavn:""}),[c,m]=a.useState(null),[p,x]=a.useState(!1),[f,h]=a.useState(!1),[v,j]=a.useState(!1),B=(0,d.usePathname)(),handleFinnBruker=async()=>{let e=(0,o.JU)(l.db,l.S2,r.Brukernavn),t=await (0,o.QT)(e);if(t.exists()){let e=t.data();e.GjentaPassord=e.Passord,m(e),"/admin/slettBruker"===B?x(!0):"/admin/oppdaterBruker"===B&&h(!0)}else j(!0),setTimeout(()=>{j(!1)},3e3)},handleFormReset=()=>{u({Brukernavn:""}),m(null),x(!1),h(!1),j(!1)},g=""!==r.Brukernavn;return(0,n.jsx)(s.Z,{sx:{width:"100%",margin:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:p?(0,n.jsx)(SlettAdminBrukerSkjema,{userData:c,onGoBack:handleFormReset}):f?(0,n.jsx)(OppdaterAdminBrukerSkjema,{userData:c,onGoBack:handleFormReset}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(FinnAdminBrukerTextField,{formData:r,onChange:u}),(0,n.jsx)(FinnAdminBrukerButton,{onFind:handleFinnBruker,isFormValid:g,onFormReset:handleFormReset,onGoBack:()=>{t()}}),(0,n.jsx)(FinnBrukerErrorAlert,{vis:v})]})})})}},25735:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return FinnBrukerSkjema}});var n=r(57437),a=r(2265),i=r(17222),s=r(25577),l=r(70148),o=r(24086),d=r(24033),u=r(59189),c=r(16895);let useResetFinnBrukerForm=e=>{a.useEffect(()=>{document.getElementById("AnsattNr").value=e.AnsattNr},[e])};function FinnBrukerTextField(e){let{formData:t,onChange:r}=e,a=(0,c.q)(r);return useResetFinnBrukerForm(t),(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"90%"},mx:2},noValidate:!0,autoComplete:"off",children:[{id:"AnsattNr",label:"AnsattNr",required:!0,variant:"filled"}].map(e=>(0,n.jsx)(u.Z,{required:e.required,id:e.id,label:e.label,variant:e.variant,onChange:a,value:t[e.id]},e.id))})}var m=r(49050),p=r(98075),x=r(66288);function FinnBrukerButton(e){let{onFind:t,isFormValid:r,onFormReset:i,onGoBack:l}=e,[o,d]=(0,a.useState)(!1);return(0,n.jsxs)(s.Z,{children:[(0,n.jsxs)(p.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{r?(t(),d(!1)):(console.log("valider ikke "+r),d(!0),setTimeout(()=>{d(!1)},3e3))},children:"Finn bruker"}),(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{d(!1),i()},children:"Reset"})]}),(0,n.jsx)(p.Z,{sx:{pt:2},children:(0,n.jsx)(m.Z,{variant:"outlined",onClick:l,children:"Tilbake"})}),(0,n.jsx)(x.C,{vis:o})]})}let f={fontSize:"16px",fontWeight:"bold",color:"black"},h=[{id:"AnsattNr",label:"AnsattNr",variant:"filled"},{id:"Fornavn",label:"Fornavn",variant:"filled"},{id:"Etternavn",label:"Etternavn",variant:"filled"},{id:"Epost",label:"Epost",variant:"filled"},{id:"Stilling",label:"Stilling",variant:"filled"},{id:"Avdeling",label:"Avdeling",variant:"filled"},{id:"AntallJobbTimer",label:"Antall jobbtimer",type:"number",variant:"filled"}];function SlettBrukerTextField(e){let{formData:t}=e;return(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:h.map(e=>(0,n.jsx)(u.Z,{disabled:!0,id:e.id,label:e.label,variant:e.variant,type:e.type,value:t[e.id],InputProps:{style:f}},e.id))})}function SlettBrukerButton(e){let{onDelete:t,handleFormReturn:r}=e;return(0,n.jsx)(s.Z,{children:(0,n.jsxs)(p.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{r()},children:"Tilbake"}),(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{t()},children:"Slett bruker"})]})})}var v=r(49804);function SlettetBrukerSuccsessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(v.Z,{severity:"success",children:"Slettet bruker"})}function SlettBrukerSkjema(e){let{userData:t,onGoBack:r}=e,[d,u]=a.useState(t),[c,m]=a.useState(!1),handleSlettBruker=async()=>{console.log("Sletter data fra database:",d),await (0,o.oe)((0,o.JU)(l.db,l.N_,d.AnsattNr)),m(!0),setTimeout(()=>{r()},3e3)};return(0,n.jsx)(s.Z,{sx:{width:.5},alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(SlettBrukerTextField,{formData:d}),(0,n.jsx)(SlettBrukerButton,{onDelete:handleSlettBruker,handleFormReturn:()=>{r()}}),(0,n.jsx)(SlettetBrukerSuccsessAlert,{vis:c})]})})})})}var j=r(39946);let useFormOppdaterBrukerDataEffect=e=>{a.useEffect(()=>{document.getElementById("AnsattNr").value=e.AnsattNr,document.getElementById("Fornavn").value=e.Fornavn,document.getElementById("Etternavn").value=e.Etternavn,document.getElementById("Epost").value=e.Epost,document.getElementById("Stilling").value=e.Stilling,document.getElementById("Avdeling").value=e.Avdeling,document.getElementById("AntallJobbTimer").value=e.AntallJobbTimer},[e])};var B=r(75729);let g=[{id:"AnsattNr",label:"AnsattNr",required:!0,variant:"filled"},{id:"Fornavn",label:"Fornavn",required:!0,variant:"filled"},{id:"Etternavn",label:"Etternavn",required:!0,variant:"filled"},{id:"Epost",label:"Epost",required:!0,variant:"filled"},{id:"Stilling",label:"Stilling",required:!0,variant:"filled"},{id:"Avdeling",label:"Avdeling",required:!0,variant:"filled"},{id:"AntallJobbTimer",label:"Antall jobbtimer",type:"number",variant:"filled"}];function OppdaterBrukerForm(e){let{formData:t,onChange:r}=e,a=(0,c.q)(r);(0,j.Q)(t),useFormOppdaterBrukerDataEffect(t);let i=(0,B.B)(r);return console.log("formData",t),(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:(0,n.jsx)("div",{children:g.map(e=>(0,n.jsx)(u.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:t=>{a(t),("Passord"===e.id||"GjentaPassord"===e.id)&&i(t)},value:t[e.id]},e.id))})})}function OppdatertBrukerSuccsessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(v.Z,{severity:"success",children:"Oppdatert bruker"})}function OppdatertBrukerErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(v.Z,{severity:"error",children:"Ansatt nummer finnes fra f\xf8r"})}function OppdatertBrukerInfoAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(v.Z,{severity:"info",children:"Ingen ting er endret"})}function ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(v.Z,{severity:"error",children:"Fyll inn alle feltene og passord m\xe5 matche"})}function OppdaterBrukerButton(e){let{onSave:t,isFormValid:r,onFormReturn:i,onByttPassord:s}=e,[l,o]=a.useState(!1);return(0,n.jsxs)("div",{children:[(0,n.jsx)(p.Z,{style:{marginBottom:"20px"},children:(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{s(),o(!1)},children:"ByttPassord"})}),(0,n.jsxs)(p.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{i(),o(!1)},children:"Tilbake"}),(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{r?(t(),o(!1)):(o(!0),setTimeout(()=>{o(!1)},3e3))},children:"Oppdater"})]}),(0,n.jsx)(ButtonErrorAlert,{vis:l})]})}var k=r(9875),y=r(77975);let S=[{id:"Passord",label:"Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"},{id:"GjentaPassord",label:"Gjenta Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"}];function ByttPassordForm(e){let{formData:t,onChange:r}=e,a=(0,j.Q)(t),i=(0,B.B)(r);return(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:S.map(e=>(0,n.jsx)(u.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:e=>{i(e)},value:t[e.id],error:("Passord"===e.id||"GjentaPassord"===e.id)&&a,helperText:("Passord"===e.id||"GjentaPassord"===e.id)&&a?"Passord m\xe5 ha 6 nummer":""},e.id))})}function ByttPassordButton(e){let{onSave:t,isFormValid:r,onFormReturn:i}=e,[s,l]=a.useState(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(p.Z,{direction:"row",spacing:2,justifyContent:"flex-center",children:[(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{i(),l(!1)},children:"Tilbake"}),(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{r?(t(),l(!1)):(l(!0),setTimeout(()=>{l(!1)},3e3))},children:"Bytt Passord"})]}),(0,n.jsx)(y.CZ,{vis:s})]})}var b=r(43226);function ByttPassordTittel(){return(0,n.jsx)(s.Z,{sx:{width:"100%",maxWidth:1e3,textAlign:"center",margin:"auto"},children:(0,n.jsx)(b.Z,{variant:"h1",sx:{fontSize:"2rem"},gutterBottom:!0,children:"Bytt Passord"})})}var Z=r(39130);function ByttPassordSkjema(e){let{userData:t,onGoBack:r}=e,[d,u]=a.useState({...t,Passord:"",GjentaPassord:""}),[c,m]=a.useState(!1),[p,x]=a.useState(!1),handleSave=async()=>{console.log("Endrer passord i database");try{let e=await (0,Z.Z)(d.Passord);await (0,o.pl)((0,o.JU)(l.db,l.N_,d.AnsattNr),{Passord:e,SistEndret:(0,o.Bt)()},{merge:!0}),m(!0),setTimeout(()=>{r()},3e3)}catch(e){x(!0),m(!1),setTimeout(()=>{r()},3e3)}},f=d.Passord===t.Passord&&d.GjentaPassord===t.GjentaPassord||d.Passord.length===k.h&&d.Passord===d.GjentaPassord;return(0,n.jsx)(s.Z,{sx:{width:.5},alignItems:"center",justifyContent:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(ByttPassordTittel,{}),(0,n.jsx)(ByttPassordForm,{formData:d,onChange:u}),(0,n.jsx)(ByttPassordButton,{onSave:handleSave,isFormValid:f,onFormReturn:()=>{console.log("Returnerer til oppdater bruker skjema"),r()}}),(0,n.jsx)(y.r_,{vis:c}),(0,n.jsx)(y.Sj,{vis:p})]})})})})}function OppdaterBrukerSkjema(e){let{userData:t,onGoBack:r}=e,[d,u]=a.useState(t);a.useEffect(()=>{u(t)},[t]),a.useEffect(()=>{let e=(0,o.JU)(l.db,l.N_,t.AnsattNr),r=(0,o.cf)(e,e=>{if(e.exists()){let t=e.data().Passord;u(e=>({...e,Passord:t}))}});return()=>r()},[t.AnsattNr]);let[c,m]=a.useState(!1),[p,x]=a.useState(!1),[f,h]=a.useState(!1),[v,j]=a.useState(!1),handleSave=async()=>{let e=Object.keys(t).some(e=>t[e]!==d[e]);if(e){if(d.AnsattNr!==t.AnsattNr){let e=(0,o.JU)(l.db,l.N_,d.AnsattNr),n=await (0,o.QT)(e);if(n.exists())x(!0),m(!1),h(!1);else{if(d.AntallJobbTimer!==t.AntallJobbTimer){let e=Number(d.AntallJobbTimer);d.Timebank=e}let n={...d,SistEndret:(0,o.Bt)(),Innlogget:!1};delete n.GjentaPassord,await (0,o.pl)(e,n);let a=(0,o.JU)(l.db,l.N_,t.AnsattNr),i=await (0,o.QT)(a);i.exists()&&(await (0,o.oe)(a),console.log("Slettet gammelt dokument med ansattNr: ",t.AnsattNr)),m(!0),x(!1),h(!1),setTimeout(()=>{r()},3e3)}}else{let e=(0,o.JU)(l.db,l.N_,t.AnsattNr);if(d.AntallJobbTimer!==t.AntallJobbTimer){let e=Number(d.AntallJobbTimer);d.Timebank=e}let n={...d,SistEndret:(0,o.Bt)(),Innlogget:!1};delete n.GjentaPassord,await (0,o.pl)(e,n),m(!0),x(!1),h(!1),setTimeout(()=>{r()},3e3)}}else h(!0),x(!1),m(!1),console.log("Ingen ting endret")},B=""!==d.AnsattNr&&""!==d.Fornavn&&""!==d.Etternavn&&""!==d.Stilling;return(0,n.jsx)(s.Z,{sx:{width:"70%",margin:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:v?(0,n.jsx)(ByttPassordSkjema,{userData:t,onGoBack:()=>{j(!1)}}):(0,n.jsx)(s.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(OppdaterBrukerForm,{formData:d,onChange:u}),(0,n.jsx)(OppdaterBrukerButton,{onSave:handleSave,isFormValid:B,onFormReturn:()=>{r()},onByttPassord:()=>{j(!0),h(!1),x(!1),m(!1)}}),(0,n.jsx)(OppdatertBrukerSuccsessAlert,{vis:c}),(0,n.jsx)(OppdatertBrukerErrorAlert,{vis:p}),(0,n.jsx)(OppdatertBrukerInfoAlert,{vis:f})]})})})})}function FinnBrukerSkjema(e){let{onGoBack:t}=e,[r,u]=a.useState({AnsattNr:""}),[c,m]=a.useState(null),[p,f]=a.useState(!1),[h,v]=a.useState(!1),[j,B]=a.useState(!1),g=(0,d.usePathname)(),handleFinnBruker=async()=>{console.log("test");let e=(0,o.JU)(l.db,l.N_,r.AnsattNr),t=await (0,o.QT)(e);if(t.exists()){let e=t.data();e.GjentaPassord=e.Passord,m(e),"/admin/slettBruker"===g?f(!0):"/admin/oppdaterBruker"===g&&v(!0)}else B(!0),setTimeout(()=>{B(!1)},3e3)},handleFormReset=()=>{u({AnsattNr:""}),m(null),f(!1),v(!1),B(!1)},k=""!==r.AnsattNr;return(0,n.jsx)(s.Z,{sx:{width:"100%",margin:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:p?(0,n.jsx)(SlettBrukerSkjema,{userData:c,onGoBack:handleFormReset}):h?(0,n.jsx)(OppdaterBrukerSkjema,{userData:c,onGoBack:handleFormReset}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(FinnBrukerTextField,{formData:r,onChange:u}),(0,n.jsx)(FinnBrukerButton,{onFind:handleFinnBruker,isFormValid:k,onFormReset:handleFormReset,onGoBack:()=>{t()}}),(0,n.jsx)(x.N,{vis:j})]})})})}},77975:function(e,t,r){"use strict";r.d(t,{CZ:function(){return ButtonErrorAlert},Sj:function(){return HashingErrorAlert},r_:function(){return ByttPassordSuccsessAlert}});var n=r(57437);r(2265);var a=r(49804);function ByttPassordSuccsessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"success",children:"Passord endret"})}function ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"error",children:"Fyll inn alle feltene og passord m\xe5 matche"})}function HashingErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"error",children:"Noe feil skjedde, pr\xf8v p\xe5 nytt"})}},24033:function(e,t,r){e.exports=r(50094)}}]);