"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{3467:function(e,t,r){r.d(t,{V:function(){return j},Z:function(){return NyAdminBrukerSkjema}});var n=r(57437),a=r(2265),i=r(25577),s=r(17222),o=r(59189),l=r(2890),d=r(16895);let useAdminFormDataEffect=e=>{a.useEffect(()=>{document.getElementById("Brukernavn").value=e.Brukernavn||"",document.getElementById("Epost").value=e.Epost||"",document.getElementById("Passord").value=e.Passord||"",document.getElementById("GjentaPassord").value=e.GjentaPassord||""},[e])};var u=r(90026);let c=[{id:"Brukernavn",label:"Bruker navn",required:!0,variant:"filled"},{id:"Epost",label:"Epost",required:!0,variant:"filled"},{id:"Passord",label:"Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"},{id:"GjentaPassord",label:"Gjenta Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"}];function NyAdminBrukerForm(e){let{formData:t,onChange:r}=e,a=(0,d.q)(r),s=(0,l.J)(t);useAdminFormDataEffect(t);let m=(0,u.C)(r);return(0,n.jsx)(i.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:c.map(e=>(0,n.jsx)(o.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:t=>{a(t),("Passord"===e.id||"GjentaPassord"===e.id)&&m(t)},value:t[e.id],error:("Passord"===e.id||"GjentaPassord"===e.id)&&s,helperText:("Passord"===e.id||"GjentaPassord"===e.id)&&s?"Passord m\xe5 ha lengde 7":""},e.id))})}var m=r(49050),f=r(98075),v=r(959);function NyAdminBrukerButton(e){let{onSave:t,isFormValid:r,onFormReset:i,onReturn:s}=e,[o,l]=a.useState(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(f.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{r?(t(),i(),l(!1)):(console.log("valider ikke "+r),l(!0),setTimeout(()=>{l(!1)},3e3))},children:"Send"}),(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{i(),l(!1)},children:"Reset"})]}),(0,n.jsx)(f.Z,{sx:{pt:2},children:(0,n.jsx)(m.Z,{variant:"outlined",onClick:s,children:"Tilbake"})}),(0,n.jsx)(v.CZ,{vis:o})]})}var p=r(39130),E=r(70148),g=r(24086);let j=7;function NyAdminBrukerSkjema(e){let{onGoBack:t}=e,[r,o]=a.useState({Brukernavn:"",Epost:"",Passord:"",GjentaPassord:""}),[l,d]=a.useState(!1),[u,c]=a.useState(!1),[m,f]=a.useState(!1),handleSave=async()=>{let e=(0,g.JU)(E.db,E.S2,r.Brukernavn),t=await (0,g.QT)(e);if(t.exists())c(!0),d(!1),f(!1),setTimeout(()=>{c(!1)},3e3);else{try{let e=await (0,p.Z)(r.Passord);await (0,g.pl)((0,g.JU)(E.db,E.S2,r.Brukernavn),{Brukernavn:r.Brukernavn,Epost:r.Epost,Passord:e,Opprettet:(0,g.Bt)(),SistEndret:(0,g.Bt)()})}catch(e){f(!0),d(!1),c(!1),setTimeout(()=>{f(!1)},3e3)}d(!0),c(!1),f(!1),setTimeout(()=>{d(!1)},3e3)}handleFormReset()},handleFormReset=()=>{o({Brukernavn:"",Epost:"",Passord:"",GjentaPassord:""})},h=""!==r.Brukernavn&&""!==Epost&&""!==r.Passord&&""!==r.GjentaPassord&&r.Passord===r.GjentaPassord&&r.Passord.length>=j;return(0,n.jsx)(i.Z,{sx:{width:"100%",margin:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,n.jsx)(i.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,n.jsxs)(s.c,{children:[(0,n.jsx)(NyAdminBrukerForm,{formData:r,onChange:o}),(0,n.jsx)(NyAdminBrukerButton,{onSave:handleSave,isFormValid:h,onFormReset:handleFormReset,onReturn:()=>{t()}}),(0,n.jsx)(v.Ik,{vis:l}),(0,n.jsx)(v.hW,{vis:u}),(0,n.jsx)(v.Sj,{vis:m})]})})})}},66288:function(e,t,r){r.d(t,{C:function(){return ButtonErrorAlert},N:function(){return FinnBrukerErrorAlert}});var n=r(57437);r(2265);var a=r(49804);function FinnBrukerErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"error",children:"Finner ikke bruker"})}function ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"error",children:"Fyll inn ansatt nummer"})}},959:function(e,t,r){r.d(t,{CZ:function(){return ButtonErrorAlert},Ik:function(){return SuccessAlert},Sj:function(){return HashingErrorAlert},hW:function(){return ErrorAlert}});var n=r(57437);r(2265);var a=r(49804);function SuccessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"success",children:"Ny bruker lagd suksessfullt"})}function ErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"error",children:"Ansatt nummer finnes fra f\xf8r"})}function ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"error",children:"Fyll inn alle feltene og passord m\xe5 matche"})}function HashingErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(a.Z,{severity:"error",children:"Noe feil skjedde, pr\xf8v p\xe5 nytt"})}},9875:function(e,t,r){r.d(t,{h:function(){return u},Z:function(){return NyBrukerForm}});var n=r(57437),a=r(2265),i=r(25577),s=r(59189),o=r(39946),l=r(16895);let useFormDataEffect=e=>{a.useEffect(()=>{document.getElementById("AnsattNr").value=e.AnsattNr||"",document.getElementById("Fornavn").value=e.Fornavn||"",document.getElementById("Etternavn").value=e.Etternavn||"",document.getElementById("Epost").value=e.Epost||"",document.getElementById("Stilling").value=e.Stilling||"",document.getElementById("Avdeling").value=e.Avdeling||"",document.getElementById("AntallJobbTimer").value=e.AntallJobbTimer||"",document.getElementById("Passord").value=e.Passord||"",document.getElementById("GjentaPassord").value=e.GjentaPassord||""},[e])};var d=r(75729);let u=6,c=[{id:"AnsattNr",label:"AnsattNr",required:!0,variant:"filled"},{id:"Fornavn",label:"Fornavn",required:!0,variant:"filled"},{id:"Etternavn",label:"Etternavn",required:!0,variant:"filled"},{id:"Epost",label:"Epost",required:!0,variant:"filled"},{id:"Stilling",label:"Stilling",required:!0,variant:"filled"},{id:"Avdeling",label:"Avdeling",required:!0,variant:"filled"},{id:"AntallJobbTimer",label:"Antall jobbtimer i uka",type:"number",variant:"filled"},{id:"Passord",label:"Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"},{id:"GjentaPassord",label:"Gjenta Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"}];function NyBrukerForm(e){let{formData:t,onChange:r}=e,a=(0,l.q)(r),u=(0,o.Q)(t);useFormDataEffect(t);let m=(0,d.B)(r);return(0,n.jsx)(i.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"95%"},mx:2},noValidate:!0,autoComplete:"off",children:c.map(e=>(0,n.jsx)(s.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:t=>{a(t),("Passord"===e.id||"GjentaPassord"===e.id)&&m(t)},value:t[e.id]||"",error:("Passord"===e.id||"GjentaPassord"===e.id)&&u,helperText:("Passord"===e.id||"GjentaPassord"===e.id)&&u?"Passord m\xe5 ha lengde 6":""},e.id))})}},39130:function(e,t,r){var n=r(14866),a=r.n(n);let bcryptHashing=async e=>{try{let t=await a().genSalt(10),r=await a().hash(e,t);return r}catch(e){throw e}};t.Z=bcryptHashing},70148:function(e,t,r){r.d(t,{N_:function(){return o},S2:function(){return l},db:function(){return s},e_:function(){return d}});var n=r(20994),a=r(24086);let i=(0,n.ZF)({apiKey:"AIzaSyDXAV7xZr-ztj97FSL3oOhaUqsIiqfR2fk",authDomain:"visma-5c70e.firebaseapp.com",projectId:"visma-5c70e",storageBucket:"visma-5c70e.appspot.com",messagingSenderId:"161477454641",appId:"1:161477454641:web:7abeb57872fb86ef719e10"}),s=(0,a.ad)(i),o="Brukere",l="AdminBrukere",d="Stempling"},2890:function(e,t,r){r.d(t,{J:function(){return useAdminFormValidation}});var n=r(2265),a=r(3467);let useAdminFormValidation=e=>{let[t,r]=n.useState(!1);return n.useEffect(()=>{let t=e.Brukernavn&&e.Epost&&e.Passord===e.GjentaPassord&&e.Passord.length>=a.V;r(!t)},[e]),t}},90026:function(e,t,r){r.d(t,{C:function(){return useAdminPassordEndring}});let useAdminPassordEndring=e=>t=>{let{id:r,value:n}=t.target;e(e=>({...e,[r]:n}))}},17222:function(e,t,r){r.d(t,{c:function(){return i}});var n=r(35843),a=r(29872);let i=(0,n.ZP)(a.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(1),textAlign:"center"}})},16895:function(e,t,r){r.d(t,{q:function(){return useFormUpdate}});let useFormUpdate=e=>t=>{let{id:r,value:n}=t.target;e(e=>({...e,[r]:n}))}},39946:function(e,t,r){r.d(t,{Q:function(){return useFormValidation}});var n=r(2265),a=r(9875);let useFormValidation=e=>{let[t,r]=n.useState(!1),isNumeric=e=>/^[0-9]+$/.test(e);return n.useEffect(()=>{let t=e.AnsattNr&&e.Fornavn&&e.Etternavn&&e.Epost&&e.Stilling&&e.Avdeling&&isNumeric(e.Passord)&&isNumeric(e.GjentaPassord)&&e.Passord===e.GjentaPassord&&e.Passord.length===a.h;r(!t)},[e]),t}},75729:function(e,t,r){r.d(t,{B:function(){return usePassordEndring}});let usePassordEndring=e=>t=>{let{id:r,value:n}=t.target,a=/^[0-9]*$/.test(n);e(e=>({...e,[r]:a?n:""}))}}}]);