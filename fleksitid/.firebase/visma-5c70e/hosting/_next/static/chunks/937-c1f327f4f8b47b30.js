(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{4085:function(e,t,r){Promise.resolve().then(r.bind(r,8119)),Promise.resolve().then(r.t.bind(r,423,23)),Promise.resolve().then(r.t.bind(r,3574,23))},894:function(e,t,r){"use strict";r.d(t,{db:function(){return l}});var n=r(994),a=r(4086);let i=(0,n.ZF)({apiKey:"AIzaSyDXAV7xZr-ztj97FSL3oOhaUqsIiqfR2fk",authDomain:"visma-5c70e.firebaseapp.com",projectId:"visma-5c70e",storageBucket:"visma-5c70e.appspot.com",messagingSenderId:"161477454641",appId:"1:161477454641:web:7abeb57872fb86ef719e10"}),l=(0,a.ad)(i)},5717:function(e,t,r){"use strict";r.d(t,{Z:function(){return AdminCheckBox}});var n=r(7437);r(2265);var a=r(7760),i=r(2582),l=r(182),s=r(4081);function AdminCheckBox(e){let{checked:t,onChange:r,label:d}=e;return(0,n.jsx)(s.Z,{component:"fieldset",children:(0,n.jsx)(i.Z,{"aria-label":"position",row:!0,children:(0,n.jsx)(l.Z,{value:"ErAdmin",control:(0,n.jsx)(a.Z,{checked:t,onChange:e=>{r(e.target.checked)},sx:{fontSize:"50px"}}),label:(0,n.jsx)("span",{style:{fontSize:"25px"},children:d}),labelPlacement:"start"})})})}},8119:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return FinnBrukerSkjema}});var n=r(7437),a=r(2265),i=r(7222),l=r(5577),s=r(894),d=r(4086),o=r(4033),u=r(1975),c=r(6895);let useResetFinnBrukerForm=e=>{a.useEffect(()=>{document.getElementById("AnsattNr").value=e.AnsattNr},[e])};function FinnBrukerTextField(e){let{formData:t,onChange:r}=e,a=(0,c.q)(r);return useResetFinnBrukerForm(t),(0,n.jsx)(l.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:1},mx:2},noValidate:!0,autoComplete:"off",children:(0,n.jsx)("div",{children:[{id:"AnsattNr",label:"AnsattNr",required:!0,variant:"filled"}].map(e=>(0,n.jsx)(u.Z,{required:e.required,id:e.id,label:e.label,variant:e.variant,onChange:a,value:t[e.id]},e.id))})})}var m=r(9050),f=r(8075),p=r(9804);function FinnBrukerErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(p.Z,{severity:"error",children:"Finner ikke bruker"})}function ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(p.Z,{severity:"error",children:"Fyll inn ansatt nummer"})}function FinnBrukerButton(e){let{onFind:t,isFormValid:r,onFormReset:i}=e,[l,s]=(0,a.useState)(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(f.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{r?(t(),s(!1)):(console.log("valider ikke "+r),s(!0),setTimeout(()=>{s(!1)},3e3))},children:"Finn bruker"}),(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{s(!1),i()},children:"Reset"})]}),(0,n.jsx)(ButtonErrorAlert,{vis:l})]})}let v={fontSize:"16px",fontWeight:"bold",color:"black"},x=[{id:"AnsattNr",label:"AnsattNr",variant:"filled"},{id:"Fornavn",label:"Fornavn",variant:"filled"},{id:"Etternavn",label:"Etternavn",variant:"filled"},{id:"Stilling",label:"Stilling",variant:"filled"},{id:"AntallJobbTimer",label:"Antall jobbtimer",type:"number",variant:"filled"},{id:"ErAdmin",label:"Adminbruker",type:"boolean",variant:"filled"}];function SlettBrukerTextField(e){let{formData:t}=e;return(0,n.jsx)(l.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:1},mx:2},noValidate:!0,autoComplete:"off",children:(0,n.jsx)("div",{children:x.map(e=>(0,n.jsx)(u.Z,{disabled:!0,id:e.id,label:e.label,variant:e.variant,type:e.type,value:t[e.id],InputProps:{style:v}},e.id))})})}function SlettBrukerButton(e){let{onDelete:t,handleFormReturn:r}=e;return(0,n.jsxs)(f.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{r()},children:"Tilbake"}),(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{t()},children:"Slett bruker"})]})}function SlettetBrukerSuccsessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(p.Z,{severity:"success",children:"Slettet bruker"})}function SlettBrukerSkjema(e){let{userData:t,onGoBack:r}=e,[o,u]=a.useState(t),[c,m]=a.useState(!1),handleSlettBruker=async()=>{console.log("Sletter data fra database:",o),await (0,d.oe)((0,d.JU)(s.db,"Brukere",o.AnsattNr)),m(!0),setTimeout(()=>{r()},3e3)};return(0,n.jsx)(l.Z,{sx:{width:.5},alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(l.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(l.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(SlettBrukerTextField,{formData:o}),(0,n.jsx)(SlettBrukerButton,{onDelete:handleSlettBruker,handleFormReturn:()=>{r()}}),(0,n.jsx)(SlettetBrukerSuccsessAlert,{vis:c})]})})})})}var j=r(9946),h=r(5166),b=r(5729),k=r(5717);let g=[{id:"AnsattNr",label:"AnsattNr",required:!0,variant:"filled"},{id:"Fornavn",label:"Fornavn",required:!0,variant:"filled"},{id:"Etternavn",label:"Etternavn",required:!0,variant:"filled"},{id:"Stilling",label:"Stilling",required:!0,variant:"filled"},{id:"AntallJobbTimer",label:"Antall jobbtimer",type:"number",variant:"filled"},{id:"Passord",label:"Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"},{id:"GjentaPassord",label:"Gjenta Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"}],A=[{id:"ErAdmin",label:"Adminbruker"}];function OppdaterBrukerForm(e){let{formData:t,onChange:r}=e,i=(0,c.q)(r),s=(0,j.Q)(t);(0,h.P)(t);let d=(0,b.B)(r),[o,m]=a.useState(!1);return a.useEffect(()=>{m(t.ErAdmin||!1)},[t.ErAdmin]),(0,n.jsx)(l.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:1},mx:2},noValidate:!0,autoComplete:"off",children:(0,n.jsxs)("div",{children:[g.map(e=>(0,n.jsx)(u.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:t=>{i(t),("Passord"===e.id||"GjentaPassord"===e.id)&&d(t)},value:t[e.id],error:("Passord"===e.id||"GjentaPassord"===e.id)&&s,helperText:("Passord"===e.id||"GjentaPassord"===e.id)&&s?"Passord m\xe5 ha 6 nummer":""},e.id)),(0,n.jsx)(k.Z,{checked:o,onChange:e=>{m(e),r({...t,ErAdmin:e})},label:A[0].label})]})})}function OppdatertBrukerSuccsessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(p.Z,{severity:"success",children:"Oppdatert bruker"})}function OppdatertBrukerErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(p.Z,{severity:"error",children:"Ansatt nummer finnes fra f\xf8r"})}function OppdatertBrukerInfoAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(p.Z,{severity:"info",children:"Ingen ting er endret"})}function Alerts_ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(p.Z,{severity:"error",children:"Fyll inn alle feltene og passord m\xe5 matche"})}function OppdaterBrukerButton(e){let{onSave:t,isFormValid:r,onFormReturn:i}=e,[l,s]=a.useState(!1);return console.log("isFormValid:",r),(0,n.jsxs)("div",{children:[(0,n.jsxs)(f.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"outlined",onClick:()=>{i(),s(!1)},children:"Tilbake"}),(0,n.jsx)(m.Z,{variant:"contained",onClick:()=>{r?(t(),s(!1)):(console.log("valider ikke "+r),s(!0),setTimeout(()=>{s(!1)},3e3))},children:"Oppdater"})]}),(0,n.jsx)(Alerts_ButtonErrorAlert,{vis:l})]})}var B=r(1116);function OppdaterBrukerSkjema(e){let{userData:t,onGoBack:r}=e,[o,u]=a.useState(t);a.useEffect(()=>{u(t)},[t]);let[c,m]=a.useState(!1),[f,p]=a.useState(!1),[v,x]=a.useState(!1),j="Brukere",handleSave=async()=>{let e=Object.keys(t).some(e=>t[e]!==o[e]);if(e){if(o.AnsattNr!==t.AnsattNr){let e=(0,d.JU)(s.db,j,o.AnsattNr),n=await (0,d.QT)(e);if(n.exists())p(!0),m(!1),x(!1);else{let n={...o,Innlogget:!1};delete n.GjentaPassord,await (0,d.pl)(e,n);let a=(0,d.JU)(s.db,j,t.AnsattNr),i=await (0,d.QT)(a);i.exists()&&(await (0,d.oe)(a),console.log("Slettet gammelt dokument med ansattNr: ",t.AnsattNr)),m(!0),p(!1),x(!1),setTimeout(()=>{r()},3e3)}}else{let e=(0,d.JU)(s.db,j,t.AnsattNr),n={...o,Innlogget:!1};delete n.GjentaPassord,await (0,d.pl)(e,n),m(!0),p(!1),x(!1),setTimeout(()=>{r()},3e3)}}else x(!0),p(!1),m(!1),console.log("Ingen ting endret")},h=""!==o.AnsattNr&&""!==o.Fornavn&&""!==o.Etternavn&&""!==o.Stilling&&(o.Passord===t.Passord&&o.GjentaPassord===t.GjentaPassord||o.Passord.length===B.h&&o.Passord===o.GjentaPassord);return(0,n.jsx)(l.Z,{sx:{width:.5},alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(l.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(l.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(OppdaterBrukerForm,{formData:o,onChange:u}),(0,n.jsx)(OppdaterBrukerButton,{onSave:handleSave,isFormValid:h,onFormReturn:()=>{r()}}),(0,n.jsx)(OppdatertBrukerSuccsessAlert,{vis:c}),(0,n.jsx)(OppdatertBrukerErrorAlert,{vis:f}),(0,n.jsx)(OppdatertBrukerInfoAlert,{vis:v})]})})})})}function FinnBrukerSkjema(){let[e,t]=a.useState({AnsattNr:""}),[r,u]=a.useState(null),[c,m]=a.useState(!1),[f,p]=a.useState(!1),[v,x]=a.useState(!1),j=(0,o.usePathname)(),handleFinnBruker=async()=>{let t=(0,d.JU)(s.db,"Brukere",e.AnsattNr),r=await (0,d.QT)(t);if(r.exists()){let e=r.data();e.GjentaPassord=e.Passord,u(e),"/admin/slettBruker"===j?m(!0):"/admin/oppdaterBruker"===j&&p(!0)}else x(!0),setTimeout(()=>{x(!1)},3e3)},handleFormReset=()=>{t({AnsattNr:""}),u(null),m(!1),p(!1),x(!1)},h=""!==e.AnsattNr;return(0,n.jsx)(l.Z,{sx:{width:.5},alignItems:"center",style:{margin:"auto"},children:c?(0,n.jsx)(SlettBrukerSkjema,{userData:r,onGoBack:handleFormReset}):f?(0,n.jsx)(OppdaterBrukerSkjema,{userData:r,onGoBack:handleFormReset}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(FinnBrukerTextField,{formData:e,onChange:t}),(0,n.jsx)(FinnBrukerButton,{onFind:handleFinnBruker,isFormValid:h,onFormReset:handleFormReset}),(0,n.jsx)(FinnBrukerErrorAlert,{vis:v})]})})})}},1116:function(e,t,r){"use strict";r.d(t,{Z:function(){return NyBrukerForm},h:function(){return m}});var n=r(7437),a=r(2265),i=r(5577),l=r(1975),s=r(9946),d=r(6895),o=r(5166),u=r(5729),c=r(5717);let m=6,f=[{id:"AnsattNr",label:"AnsattNr",required:!0,variant:"filled"},{id:"Fornavn",label:"Fornavn",required:!0,variant:"filled"},{id:"Etternavn",label:"Etternavn",required:!0,variant:"filled"},{id:"Stilling",label:"Stilling",required:!0,variant:"filled"},{id:"AntallJobbTimer",label:"Antall jobbtimer i uka",type:"number",variant:"filled"},{id:"Passord",label:"Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"},{id:"GjentaPassord",label:"Gjenta Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"}],p=[{id:"ErAdmin",label:"Adminbruker"}];function NyBrukerForm(e){let{formData:t,onChange:r}=e,m=(0,d.q)(r),v=(0,s.Q)(t);(0,o.P)(t);let x=(0,u.B)(r),[j,h]=a.useState(t.ErAdmin||!1);return a.useEffect(()=>{h(t.ErAdmin||!1)},[t.ErAdmin]),(0,n.jsx)(i.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:1},mx:2},noValidate:!0,autoComplete:"off",children:(0,n.jsxs)("div",{children:[f.map(e=>(0,n.jsx)(l.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:t=>{m(t),("Passord"===e.id||"GjentaPassord"===e.id)&&x(t)},value:t[e.id],error:("Passord"===e.id||"GjentaPassord"===e.id)&&v,helperText:("Passord"===e.id||"GjentaPassord"===e.id)&&v?"Passord m\xe5 ha lengde 6":""},e.id)),(0,n.jsx)(c.Z,{checked:j,onChange:e=>{h(e),r({...t,ErAdmin:e})},label:p[0].label})]})})}},5166:function(e,t,r){"use strict";r.d(t,{P:function(){return useFormDataEffect}});var n=r(2265);let useFormDataEffect=e=>{n.useEffect(()=>{document.getElementById("AnsattNr").value=e.AnsattNr,document.getElementById("Fornavn").value=e.Fornavn,document.getElementById("Etternavn").value=e.Etternavn,document.getElementById("Stilling").value=e.Stilling,document.getElementById("AntallJobbTimer").value=e.AntallJobbTimer,document.getElementById("Passord").value=e.Passord,document.getElementById("GjentaPassord").value=e.GjentaPassord;let t=document.getElementById("ErAdmin");t&&(t.checked=void 0!==e.ErAdmin&&e.ErAdmin)},[e])}},7222:function(e,t,r){"use strict";r.d(t,{c:function(){return i}});var n=r(5843),a=r(6055);let i=(0,n.ZP)(a.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(1),textAlign:"center"}})},6895:function(e,t,r){"use strict";r.d(t,{q:function(){return useFormUpdate}});let useFormUpdate=e=>t=>{let{id:r,value:n}=t.target;e(e=>({...e,[r]:n}))}},9946:function(e,t,r){"use strict";r.d(t,{Q:function(){return useFormValidation}});var n=r(2265),a=r(1116);let useFormValidation=e=>{let[t,r]=n.useState(!1),isNumeric=e=>/^[0-9]+$/.test(e);return n.useEffect(()=>{let t=e.AnsattNr&&e.Fornavn&&e.Etternavn&&e.Stilling&&isNumeric(e.Passord)&&isNumeric(e.GjentaPassord)&&e.Passord===e.GjentaPassord&&e.Passord.length===a.h;r(!t)},[e]),t}},5729:function(e,t,r){"use strict";r.d(t,{B:function(){return usePassordEndring}});let usePassordEndring=e=>t=>{let{id:r,value:n}=t.target,a=/^[0-9]*$/.test(n);e(e=>({...e,[r]:a?n:""}))}},4033:function(e,t,r){e.exports=r(94)}}]);