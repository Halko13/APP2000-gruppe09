(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{7457:function(e,t,r){Promise.resolve().then(r.bind(r,8432)),Promise.resolve().then(r.t.bind(r,423,23)),Promise.resolve().then(r.t.bind(r,3574,23))},5717:function(e,t,r){"use strict";r.d(t,{Z:function(){return AdminCheckBox}});var n=r(7437);r(2265);var a=r(7760),s=r(2582),i=r(182),l=r(4081);function AdminCheckBox(e){let{checked:t,onChange:r,label:o}=e;return(0,n.jsx)(l.Z,{component:"fieldset",children:(0,n.jsx)(s.Z,{"aria-label":"position",row:!0,children:(0,n.jsx)(i.Z,{value:"ErAdmin",control:(0,n.jsx)(a.Z,{checked:t,onChange:e=>{r(e.target.checked)},sx:{fontSize:"50px"}}),label:(0,n.jsx)("span",{style:{fontSize:"25px"},children:o}),labelPlacement:"start"})})})}},8432:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return NyBrukerSkjema}});var n=r(7437),a=r(2265),s=r(5577),i=r(7222),l=r(9276),o=r(9050),d=r(8075),u=r(9804);function SuccessAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(u.Z,{severity:"success",children:"Ny bruker lagd suksessfullt"})}function ErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(u.Z,{severity:"error",children:"Ansatt nummer finnes fra f\xf8r"})}function ButtonErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(u.Z,{severity:"error",children:"Fyll inn alle feltene og passord m\xe5 matche"})}function HashingErrorAlert(e){let{vis:t}=e;return t&&(0,n.jsx)(u.Z,{severity:"error",children:"Noe feil skjedde, pr\xf8v p\xe5 nytt"})}function NyBrukerButton(e){let{onSave:t,isFormValid:r,onFormReset:s}=e,[i,l]=a.useState(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(d.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(o.Z,{variant:"contained",onClick:()=>{r?(t(),s(),l(!1)):(console.log("valider ikke "+r),l(!0),setTimeout(()=>{l(!1)},3e3))},children:"Send"}),(0,n.jsx)(o.Z,{variant:"outlined",onClick:()=>{s(),l(!1)},children:"Reset"})]}),(0,n.jsx)(ButtonErrorAlert,{vis:i})]})}var c=r(9130),m=r(148),f=r(4086);function NyBrukerSkjema(){let[e,t]=a.useState({AnsattNr:"",Fornavn:"",Etternavn:"",Stilling:"",AntallJobbTimer:"",Passord:"",GjentaPassord:"",ErAdmin:!1}),[r,o]=a.useState(!1),[d,u]=a.useState(!1),[v,h]=a.useState(!1),handleSave=async()=>{console.log("Lagrer data til database:",e);let t=(0,f.JU)(m.db,m.N,e.AnsattNr),r=await (0,f.QT)(t);if(r.exists())u(!0),o(!1),h(!1),setTimeout(()=>{u(!1)},3e3);else{try{let t=await (0,c.Z)(e.Passord);await (0,f.pl)((0,f.JU)(m.db,m.N,e.AnsattNr),{AnsattNr:e.AnsattNr,Fornavn:e.Fornavn,Etternavn:e.Etternavn,Stilling:e.Stilling,AntallJobbTimer:e.AntallJobbTimer,Passord:t,Innlogget:!1,ErAdmin:e.ErAdmin,Opprettet:(0,f.Bt)(),SistEndret:(0,f.Bt)(),Timebank:Number(e.AntallJobbTimer)})}catch(e){h(!0),o(!1),u(!1),setTimeout(()=>{h(!1)},3e3)}o(!0),u(!1),h(!1),setTimeout(()=>{o(!1)},3e3)}handleFormReset()},handleFormReset=()=>{t({AnsattNr:"",Fornavn:"",Etternavn:"",Stilling:"",AntallJobbTimer:"",Passord:"",GjentaPassord:"",ErAdmin:!1})},g=""!==e.AnsattNr&&""!==e.Fornavn&&""!==e.Etternavn&&""!==e.Stilling&&""!==e.Passord&&""!==e.GjentaPassord&&e.Passord===e.GjentaPassord&&e.Passord.length===l.h;return(0,n.jsx)(s.Z,{sx:{width:.5},alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{display:"grid",gridTemplateColumns:"repeat(1fr, 1fr)",gap:2,alignItems:"center",style:{margin:"auto"},children:(0,n.jsx)(s.Z,{gridColumn:"span 1",children:(0,n.jsxs)(i.c,{children:[(0,n.jsx)(l.Z,{formData:e,onChange:t}),(0,n.jsx)(NyBrukerButton,{onSave:handleSave,isFormValid:g,onFormReset:handleFormReset}),(0,n.jsx)(SuccessAlert,{vis:r}),(0,n.jsx)(ErrorAlert,{vis:d}),(0,n.jsx)(HashingErrorAlert,{vis:v})]})})})})}},9276:function(e,t,r){"use strict";r.d(t,{h:function(){return c},Z:function(){return NyBrukerForm}});var n=r(7437),a=r(2265),s=r(5577),i=r(1975),l=r(9946),o=r(6895);let useFormDataEffect=e=>{a.useEffect(()=>{document.getElementById("AnsattNr").value=e.AnsattNr,document.getElementById("Fornavn").value=e.Fornavn,document.getElementById("Etternavn").value=e.Etternavn,document.getElementById("Stilling").value=e.Stilling,document.getElementById("AntallJobbTimer").value=e.AntallJobbTimer,document.getElementById("Passord").value=e.Passord,document.getElementById("GjentaPassord").value=e.GjentaPassord;let t=document.getElementById("ErAdmin");t&&(t.checked=void 0!==e.ErAdmin&&e.ErAdmin)},[e])};var d=r(5729),u=r(5717);let c=6,m=[{id:"AnsattNr",label:"AnsattNr",required:!0,variant:"filled"},{id:"Fornavn",label:"Fornavn",required:!0,variant:"filled"},{id:"Etternavn",label:"Etternavn",required:!0,variant:"filled"},{id:"Stilling",label:"Stilling",required:!0,variant:"filled"},{id:"AntallJobbTimer",label:"Antall jobbtimer i uka",type:"number",variant:"filled"},{id:"Passord",label:"Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"},{id:"GjentaPassord",label:"Gjenta Passord",type:"password",autoComplete:"current-password",required:!0,variant:"filled"}],f=[{id:"ErAdmin",label:"Adminbruker"}];function NyBrukerForm(e){let{formData:t,onChange:r}=e,c=(0,o.q)(r),v=(0,l.Q)(t);useFormDataEffect(t);let h=(0,d.B)(r),[g,b]=a.useState(t.ErAdmin||!1);return a.useEffect(()=>{b(t.ErAdmin||!1)},[t.ErAdmin]),(0,n.jsx)(s.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:1},mx:2},noValidate:!0,autoComplete:"off",children:(0,n.jsxs)("div",{children:[m.map(e=>(0,n.jsx)(i.Z,{id:e.id,label:e.label,type:e.type||"text",autoComplete:e.autoComplete||"",required:e.required||!1,variant:e.variant||"filled",onChange:t=>{c(t),("Passord"===e.id||"GjentaPassord"===e.id)&&h(t)},value:t[e.id],error:("Passord"===e.id||"GjentaPassord"===e.id)&&v,helperText:("Passord"===e.id||"GjentaPassord"===e.id)&&v?"Passord m\xe5 ha lengde 6":""},e.id)),(0,n.jsx)(u.Z,{checked:g,onChange:e=>{b(e),r({...t,ErAdmin:e})},label:f[0].label})]})})}},9130:function(e,t,r){"use strict";var n=r(4866),a=r.n(n);let bcryptHashing=async e=>{try{let t=await a().genSalt(10),r=await a().hash(e,t);return r}catch(e){throw e}};t.Z=bcryptHashing},148:function(e,t,r){"use strict";r.d(t,{N:function(){return l},db:function(){return i}});var n=r(994),a=r(4086);let s=(0,n.ZF)({apiKey:"AIzaSyDXAV7xZr-ztj97FSL3oOhaUqsIiqfR2fk",authDomain:"visma-5c70e.firebaseapp.com",projectId:"visma-5c70e",storageBucket:"visma-5c70e.appspot.com",messagingSenderId:"161477454641",appId:"1:161477454641:web:7abeb57872fb86ef719e10"}),i=(0,a.ad)(s),l="Brukere"},7222:function(e,t,r){"use strict";r.d(t,{c:function(){return s}});var n=r(5843),a=r(6055);let s=(0,n.ZP)(a.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(1),textAlign:"center"}})},6895:function(e,t,r){"use strict";r.d(t,{q:function(){return useFormUpdate}});let useFormUpdate=e=>t=>{let{id:r,value:n}=t.target;e(e=>({...e,[r]:n}))}},9946:function(e,t,r){"use strict";r.d(t,{Q:function(){return useFormValidation}});var n=r(2265),a=r(9276);let useFormValidation=e=>{let[t,r]=n.useState(!1),isNumeric=e=>/^[0-9]+$/.test(e);return n.useEffect(()=>{let t=e.AnsattNr&&e.Fornavn&&e.Etternavn&&e.Stilling&&isNumeric(e.Passord)&&isNumeric(e.GjentaPassord)&&e.Passord===e.GjentaPassord&&e.Passord.length===a.h;r(!t)},[e]),t}},5729:function(e,t,r){"use strict";r.d(t,{B:function(){return usePassordEndring}});let usePassordEndring=e=>t=>{let{id:r,value:n}=t.target,a=/^[0-9]*$/.test(n);e(e=>({...e,[r]:a?n:""}))}}},function(e){e.O(0,[358,218,863,777,50,109,423,458,177,971,472,744],function(){return e(e.s=7457)}),_N_E=e.O()}]);