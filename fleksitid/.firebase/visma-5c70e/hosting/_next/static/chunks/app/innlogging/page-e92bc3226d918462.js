(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{2431:function(){},5525:function(n,e,r){Promise.resolve().then(r.bind(r,1741))},894:function(n,e,r){"use strict";r.d(e,{db:function(){return d}});var i=r(994),t=r(4086);let a=(0,i.ZF)({apiKey:"AIzaSyDXAV7xZr-ztj97FSL3oOhaUqsIiqfR2fk",authDomain:"visma-5c70e.firebaseapp.com",projectId:"visma-5c70e",storageBucket:"visma-5c70e.appspot.com",messagingSenderId:"161477454641",appId:"1:161477454641:web:7abeb57872fb86ef719e10"}),d=(0,t.ad)(a)},1741:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return page}});var i=r(7437);r(6543);var t=r(2265),a=r(8508),d=r(3226),l=r(9050),o=r(1975),components_AnsattInnlogging=n=>{let{valgtBrukerNavn:e,pin:r,håndterPinEndring:t,håndterInnlogin:a}=n;return(0,i.jsxs)("form",{onSubmit:a,children:[(0,i.jsx)("form",{onSubmit:a,children:(0,i.jsx)(d.Z,{variant:"h5",gutterBottom:!0,children:e})}),(0,i.jsx)(o.Z,{fullWidth:!0,id:"pin",type:"password",label:"PIN-kode",placeholder:"PIN-kode",margin:"normal",value:r,onChange:t}),(0,i.jsx)(l.Z,{variant:"contained",type:"submit",fullWidth:!0,children:"Logg inn"})]})},components_AdminInnlogging=n=>{let{adminBruker:e,vedPassordEndring:r,vedLoginKlikk:t,passord:a}=n;return(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Z,{variant:"h6",children:e.brukernavn}),(0,i.jsx)(o.Z,{fullWidth:!0,type:"password",label:"Password",placeholder:"Enter your password",margin:"normal",value:a,onChange:r}),(0,i.jsx)(l.Z,{variant:"contained",onClick:t,fullWidth:!0,style:{marginTop:"20px"},children:"Logg inn som admin"})]})},s=r(8874),components_NummerPad=n=>{let{vedNumKlikk:e,vedSlett:r,vedEnter:t}=n,håndterNummerKlikk=n=>{"⌫"===n?r():"✓"===n?t():e(n)};return(0,i.jsx)(s.ZP,{container:!0,spacing:1,children:["1","2","3","4","5","6","7","8","9","⌫","0","✓"].map(n=>(0,i.jsx)(s.ZP,{item:!0,xs:4,children:(0,i.jsx)(l.Z,{variant:"outlined",onClick:()=>håndterNummerKlikk(n),sx:{width:"100%",height:"64px",fontSize:"24px"},children:n})},n))})},u=r(4081),c=r(7033),v=r(4997),g=r(3341),h=r(7739),HenteBruker=n=>{let{brukere:e,adminBrukere:r,valgtBrukerId:a,håndterBrukerEndring:d,gåTilInnlogging:s}=n,[m,k]=(0,t.useState)(""),p=m?e.filter(n=>n.Fornavn&&n.Fornavn.toLowerCase().includes(m.toLowerCase())||n.Etternavn&&n.Etternavn.toLowerCase().includes(m.toLowerCase())):e,f=m?r.filter(n=>n.brukernavn&&n.brukernavn.toLowerCase().includes(m.toLowerCase())):r;return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Z,{fullWidth:!0,margin:"normal",label:"S\xf8k etter navnet ditt",value:m,onChange:n=>{k(n.target.value)},placeholder:"Skriv her for \xe5 s\xf8ke etter navnet ditt"}),(0,i.jsxs)(u.Z,{fullWidth:!0,margin:"normal",children:[(0,i.jsx)(c.Z,{id:"velge-bruker-label",children:"Velg bruker"}),(0,i.jsxs)(v.Z,{labelId:"velge-bruker-label",id:"velge-bruker",value:a,label:"Velg bruker",onChange:d,children:[(0,i.jsx)(g.Z,{children:"Brukere"}),p.map(n=>(0,i.jsxs)(h.Z,{value:n.id,children:[n.Fornavn?n.Fornavn:"Ukjent"," ",n.Etternavn?n.Etternavn:""]},n.id)),(0,i.jsx)(g.Z,{children:"Administratorer"}),f.map(n=>(0,i.jsx)(h.Z,{value:n.brukernavn,children:n.brukernavn},n.brukernavn))]})]}),(0,i.jsx)(l.Z,{variant:"contained",onClick:s,fullWidth:!0,children:"G\xe5 til pin innloggin"})]})},m=r(3113),k=r(8652);let p=(0,m.Z)({palette:{primary:{main:k.Z[500]},secondary:{main:k.Z[300]}}});var f=r(894),x=r(4086),page=()=>{var n,e,r,o,s,u;let[c,v]=(0,t.useState)(""),[g,h]=(0,t.useState)(""),[m,k]=(0,t.useState)(""),[j,b]=(0,t.useState)("VelgBrukerListe"),[Z,w]=(0,t.useState)(!1),[E,y]=(0,t.useState)([]),[L,I]=(0,t.useState)([]);(0,t.useEffect)(()=>{let hentBrukere=async()=>{let n=(0,x.hJ)(f.db,"Brukere"),e=await (0,x.PL)(n),r=e.docs.map(n=>({id:n.id,...n.data()}));y(r);let i=r.filter(n=>n.erAdmin);I(i)};hentBrukere()},[]);let håndterPinKodeEndring=n=>{h(n.target.value)},validerLogin=()=>{let n=E.find(n=>n.id===c);n&&(n.ErAdmin&&n.Passord===g?(k("Logget inn som admin. Velkommen "+n.Fornavn+"!"),window.location.href="/admin"):n.ErAdmin||n.Passord!==g?k("Innlogging feilet. Feil navn eller pin kode!"):(k("Logget inn. Velkommen ".concat(n.Fornavn," ").concat(n.Etternavn,"!")),window.location.href="/sjekkinn"))},håndterInnlogin=n=>{n.preventDefault(),validerLogin()};return(0,t.useEffect)(()=>{let håndterTaseTrykk=n=>{n.key>="0"&&n.key<="9"?h(e=>e+n.key):"Enter"===n.key?validerLogin():"Backspace"===n.key&&h(n=>n.slice(0,-1))};return window.addEventListener("keydown",håndterTaseTrykk),()=>{window.removeEventListener("keydown",håndterTaseTrykk)}},[g,validerLogin]),(0,i.jsx)(a.Z,{theme:p,children:(0,i.jsxs)("div",{children:["VelgBrukerListe"===j?(0,i.jsx)(HenteBruker,{brukere:E,adminBrukere:L,valgtBrukerId:c,håndterBrukerEndring:n=>{let e=n.target.value,r=E.find(n=>n.id===e);v(e),w((null==r?void 0:r.erAdmin)||!1),h(""),k("")},gåTilInnlogging:()=>{b("innlogging")}}):(0,i.jsxs)("div",{children:[(0,i.jsxs)(d.Z,{variant:"h2",gutterBottom:!0,children:["Velkommen ",Z?null===(n=L.find(n=>n.brukernavn===c))||void 0===n?void 0:n.brukernavn:"".concat(null===(e=E.find(n=>n.id===c))||void 0===e?void 0:e.Fornavn," ").concat(null===(r=E.find(n=>n.id===c))||void 0===r?void 0:r.Etternavn)]}),(0,i.jsxs)(d.Z,{variant:"h5",gutterBottom:!0,children:["Logget p\xe5 som: ",Z?(null===(o=L.find(n=>n.brukernavn===c))||void 0===o?void 0:o.brukernavn)||"Ukjent Admin":"".concat(null===(s=E.find(n=>n.id===c))||void 0===s?void 0:s.Fornavn," ").concat(null===(u=E.find(n=>n.id===c))||void 0===u?void 0:u.Etternavn)||"Ukjent Bruker"]}),Z?(0,i.jsx)("div",{children:(0,i.jsx)(components_AdminInnlogging,{adminBruker:L,passord:g,vedPassordEndring:håndterPinKodeEndring,vedLoginKlikk:håndterInnlogin})}):(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Z,{variant:"h4",gutterBottom:!0,style:{marginTop:"50px"},children:"For skjerminnlogging"}),(0,i.jsx)(components_NummerPad,{vedNumKlikk:n=>{h(e=>e+n)},vedSlett:()=>{h(n=>n.slice(0,-1))},vedEnter:()=>{håndterInnlogin()}}),(0,i.jsx)(components_AnsattInnlogging,{pin:g,håndterPinnEndring:håndterPinKodeEndring,håndterInnlogin:håndterInnlogin})]})]}),(0,i.jsx)(l.Z,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>{window.location.href="/"},style:{marginTop:75},children:"G\xe5 tilbake til hovedsiden"}),m&&(0,i.jsx)(d.Z,{variant:"h5",style:{marginTop:"15px"},children:m})]})})}}},function(n){n.O(0,[358,702,365,99,737,220,841,971,472,744],function(){return n(n.s=5525)}),_N_E=n.O()}]);